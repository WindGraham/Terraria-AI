{
  "title": "房屋",
  "content": "一间基本的房屋。 9（外部宽度）× 7（外部高度）\n房屋（或家）是生成城镇 NPC 所必需的由玩家建造的建筑物，每个 NPC 都需要一间房屋。建筑物需要满足一些要求才能作为房屋使用（见下方）。玩家可以用房屋菜单来检查建筑物是否满足要求，或是将 NPC 分配进已有的房屋。如果被 NPC 占用的房屋受损而导致其不满足要求，NPC 将从中搬出并在附近区域内走动，直到产生合适的房屋。如果世界中有空余的房屋，NPC 可能会入住到其中的一间内。如果 NPC 被杀死且他没有家，他将在有可用的新房屋后重生。\n（译注：本文中使用的两个术语：入住（move in），指新的或失去房屋的 NPC 搬进一个房屋这一事件；分配（assign），指使用房屋菜单让世界中已经存在的 NPC 住到一个房屋中的行为。）\n如果城镇 NPC 和他的房屋都在屏幕外，他将会在夜晚、雨、日食、或史莱姆雨期间传送回他的房屋。老人若正站在地牢砖上，就也会被传送回房屋，无论时间。老人会将地牢点（老人的生成点，即他晚上所站的两格的左边那格）视为他的房屋。[1][2]\n向导在常规的新世界一开启时就会出现，但如果他被杀死就需要有房屋才能重生。老人、旅商、骷髅商人不要求房屋。\n类似地，向导、渔夫、哥布林工匠、酒馆老板、机械师、发型师、巫师、税收官、和高尔夫球手各自的最初出现和是否有可用房屋无关。一旦首次发现他们后，每个人都需要有一个合适的房屋才会重生。\n某些自然生成的建筑物可作为房屋，若玩家在其中放置光源就可能会在不经意间吸引 NPC（如漂浮岛上的建筑物）。可以用房屋菜单将住在其中的 NPC 搬到玩家的建筑物去。\n玩家选定床能作为生成点的要求与作为 NPC 房屋的要求类似，但要宽松一些。玩家无需床以外的其他家具。完整细节参见床页面。\n\n目录\n\n1 房屋菜单\n2 房屋有效性评估\n\n2.1 框架\n\n2.1.1 最小的房屋尺寸\n\n2.2 家具\n\n2.2.1 光源\n2.2.2 平坦表面物品\n2.2.3 舒适性物品\n2.2.4 入口物品\n\n2.3 属性\n\n2.3.1 邪恶分值\n2.3.2 家图格分值\n\n2.4 松露人\n\n3 成就\n4 备注\n5 小贴士\n6 花絮\n房屋有效性评估可分成 3 个阶段：框架、家具、和属性。\n\n框架\n在这一阶段，游戏会尝试判定出房屋的边框和内部区域，并且对其结构完成若干评估。[3]\n房屋的范围包括一块“连通”的内部区域和围绕着内部区域的“边框”，其中：\n\n一个图格可以在 8 个方向上“连通”，即房屋内部区域中的图格需要在水平方向、竖直方向、或斜角方向上彼此相连。\n“边框”是指围绕着内部图格的那些图格。边框必须完全封闭（即内部区域和边框外的任何图格完全不连通）。边框必须由实心图格（即未被致动的实心块或平台）、机关门、门、或高门组成（仅有关门状态下所占据的那些图格才算作外框）。\n房屋范围内的所有图格（包括框架和内部区域），需要满足以下条件：\n\n所有图格离真正世界边界必须有至少 10 个图格远。[4]\n范围内不允许存在水平或竖直方向上连续 5 格及以上图格的“洞”。“洞”指的是未被有效的实心块占据同时又没有有效的背景墙的图格。\n不安全墙（如自然生成的土墙）不算作有效背景墙。\n如果背景墙上有“洞”，有时会让敌怪在房屋之中生成。要打造更安全的窗户，建议使用玻璃墙。\n房屋的大小也有约束：包括边框和内部区域，总共的图格数量至少要有 60 个，同时要少于 750 个。\n下方为和框架检查相关的状态讯息：[5]\n若房屋缺少太多的背景墙：“这个房间少了背景墙”\n若房屋太小：“这个房间太小了”\n若房屋太大：“这个房间太大了”\n在决定房屋的框架后，游戏会为接下来的检查保存两个区域：[6]\n\n整个房屋区域。这包括所有内部图格和框架。这被用于检查有效家具。\n房屋内部的坐标。这包括排除所有框架图格后，最左与最右侧的图格的 X 坐标（左侧 X1，右侧 X2），和最高与最低处的图格的 Y 坐标（上方 Y1，下方 Y2）。这被用于检查邪恶分值和家图格分值。\n 整个房屋区域（红色）和由内部坐标所创建的矩形（黄色）。\n\n最小的房屋尺寸\n 微型的 3×10 房屋。\n 一个简单的有效的房屋。\n由于房屋的最小大小为 60 格（包括框架），因此，矩形的房屋尺寸必须满足以下最低要求之一：\n\n不包括天花板、地板和墙\n包括天花板、地板和墙\n\n3 格宽 × 10 格高 [7]\n5 格宽 × 12 格高\n\n4 格宽 × 8 格高\n6 格宽 × 10 格高\n\n5 格宽 × 7 格高\n7 格宽 × 9 格高\n\n6 格宽 × 6 格高\n8 格宽 × 8 格高\n\n7 格宽 × 5 格高\n9 格宽 × 7 格高\n\n8 格宽 × 4 格高\n10 格宽 × 6 格高\n\n10 格宽 × 3 格高\n12 格宽 × 5 格高\n\n注意房屋并不需要是矩形的。上方的尺寸仅作示例。\n\n家具\n在这一阶段，游戏会检测完整房屋区域内是否有必要的家具。\n房屋范围内必须至少有一个有效的光源、一个有效的平坦表面物品、一个有效的舒适性物品、和一个有效的入口。[8]符合条件的最小最简单的物品分别是火把、工作台、椅子、和木平台各一个。所有可用物品的列表见下方。[9]\n\n并非所有提供光亮的物品都满足房屋的光源要求；具体来说，任何实心块、平台、或墙都是不合格的。\n入口并不需要是 NPC 可使用的（例如，NPC 并不能使用机关门），也并不需要通向“室外”（例如，放置在房屋内的一个平台也是可用的）。\n下列每个物品的任何类型都满足要求。例如，任何颜色的火把都可以，任何主题的椅子也一样。\n如果房屋缺少任何所需的家具，它会在状态讯息中被提及。[5]\n例如，对于没有任何家具的房屋会出现“这个房屋缺少光源、门、桌子和椅子。”\n\n光源光源\n任何图格 ID为 4、33、34、35、42、49、92、93、95、98、100、149、173、174、270、271、316、317、318、372、405、572、581、592、646、或 660 的物品：\n\n火把提基火把蜡烛骷髅头灯笼烛台灯红心灯笼灯笼吊灯壁炉杰克南瓜灯圣诞灯星星瓶水蜡烛水母罐灯柱魂瓶和平蜡烛吊挂火盆暗影蜡烛熔岩萤火虫瓶飞灵瓶\n平坦表面物品平坦表面物品\n任何图格 ID 为 14、18、87、88、90、101、354、355、464、469、或 487 的物品：\n\n桌子梳妆台工作台浴缸书架钢琴炼药桌施法桌战争桌野餐桌\n舒适性物品舒适性物品\n任何图格 ID 为 15、79、89、102、487、或 497 的物品：\n\n椅子马桶高脚凳床长椅沙发Chippy的沙发王座野餐桌\n入口物品入口物品\n任何图格 ID 为 10、11、19、386、387、388、389、427、435、436、437、438、或 439 的物品：\n\n平台门高门机关门\n\n属性\n经过以上的步骤，房屋结构上似乎已经合格了，但仍可能有三种原因导致它变得无效：它已被占用；它太靠近或在邪恶生物群系中；它其中没有可供 NPC 在夜晚站立的位置。\n\n首先，检查房屋是否已被其他 NPC 入住占据。如果已有入住，则房屋无效，并显示状态讯息“此房屋已被占据。”\n否则，就会通过判定两种房屋属性的方式来确认一个房屋是否有效：邪恶分值，和家图格分值。[10]\n邪恶分值\n然后，开始评估邪恶分值：\n\n 邪恶分值区域示例（橙色矩形）。\n所检查的区域基于房屋的内部坐标，向外延伸。具体的延伸范围随游戏版本而有所不同，在 1.4.4.9() 中是：[11]\n水平方向：以房屋范围内最靠左/右的图格开始，各延伸 45 格（从 X1-45 到 X2+45）。\n竖直方向：以房屋范围内最靠上/下的图格为起点，向上延伸 42 格、向下延伸 45 格（从 Y1-42 到 Y2+45）。\n如果以上区域四边中的任意边距离真正的世界边界小于 5 格，则收缩到距离世界边界 5 格处。 [12]\n统计区域中的所有有效图格（包括被致动的）的总分值，具体见下表：[13]\n\n图格\n对分值的影响\n\n腐化草\n\n每格 +1 分\n\n黑檀石块\n\n紫冰雪块\n\n黑檀沙块\n\n黑檀沙岩块()\n\n硬化黑檀沙块()\n\n腐化多刺灌木\n\n 腐化植物\n\n魔菇\n\n猩红草\n\n猩红石块\n\n红冰雪块\n\n猩红沙块\n\n猩红沙岩块()\n\n硬化猩红沙块()\n\n猩红多刺灌木()\n\n神圣草\n\n每格 -1 分\n\n珍珠石块\n\n粉冰雪块\n\n珍珠沙块\n\n珍珠沙岩块()\n\n硬化珍珠沙块()\n\n 矮神圣植物\n\n 高神圣植物（每株植物仅算作一格，虽然其外观上高两格。）\n\n向日葵\n\n每棵 -40 分[14]\n\n最终计算：邪恶分值 = 腐化图格分值 + 猩红图格分值 + 神圣图格分值 + 向日葵分值\n如果邪恶分值至少为 50，则房屋无效，并显示“此房屋已腐化。”，若邪恶分值至少为 300 时，则改为显示“这不是有效的房屋。”当一间已被占用的房间被腐化/猩红化时，生活在其中的 NPC 可能会搬出去并在此区域走动，直到有新的房屋可用。\n\n家图格分值\n然后，开始检查房屋内是否有有效的“家图格”。家图格会在一个基于房屋的内部坐标所确定的矩形区域内选择。区域起始于最左和最右侧图格向内 1 格，最上方图格向下 2 格，最下方图格向下延伸 1 格（从 X1+1 至 X2-1，从 Y1+2 至 Y2+1）。[10]\n\n 内部坐标所创建的矩形（黄色），和从中选择家图格的区域（青色）。\n\n 判定范围示例。\n然后，所选图格需要满足下方需求以成为有效的家图格。图中紫色图格作为待判定的家图格：\n\n它不能是平台或泡泡。\n它本身和它左侧和右侧直接相邻它的图格（蓝色图格）必须是实心的未被致动的图格。\n它正上方高 3 格，宽 3 格的范围内（绿色方框中的图格）不能有影响通行的物体（即不允许有未致动的实心块，但可以有平台）。\n它正上方 3 格（绿色方框中的黄色图格）必须没有实心图格，且这 3 格必须全部都在房屋范围内。\n如果有符合以上条件的图格，使用正上方 5×4 范围内（红色、白色、黄色图格）的物体来计算“家图格分值”。“家图格分值”起始为 50。\n\n区域内的大部分类型的实心图格（物块、家具，等等）都会影响家图格分值。以下为不被包含在内的图格的列表：[15]\n\n不包含的图格\n任何 图格 ID为 3、4、73、82、83、84、或 386 的图格：\n\n普通草和高茎草植物蘑菇火把任何生长阶段的草药机关门()（开启）\n\n对于第一次计算，在正中间一列的（即图格正上方 1×4 的范围；黄色图格）不被使用，它们只参与第二次计算（见下方）。在此步骤中也无视宝箱，第二次计算才会考虑它们。\n其余的 16 格（红色、白色图格）参与第一次计算：\n每一格关闭的门或高门 −20 分。\n每一格开启的门的门轴部分（即关闭状态下门所占据的范围）[16]或开启的高门 −20 分。\n每一格未致动的实心图格 −5 分。\n每一格其他物体（或未被占用的格）+5 分。\n在第一次计算后，若家图格分值小于等于 0，则该图格无效。若家图格分值大于 0，则继续进行第二次计算：\n\n如果正在将第二名 NPC 分配到房屋中，导致他们共享房屋（城镇 NPC 和城镇宠物()），且当前格与已入住的那个 NPC 的家图格水平距离小于 3，那么分值会被直接设置为 1。\n如果正上方除中间一列以外的 5×4 范围内（红色、白色图格）有任何类型的常规宝箱（机关宝箱不算，但锁住的宝箱算）[17]，宝箱每占用一个图格 −30 分。如果计算后分值小于 1，则设置为 1。\n如果正上方 1×4 范围内（黄色图格）有未被致动的物块，每有一格就 −15 分。\n如果最终分值小于等于 0，此格不合格。\n房屋内必须至少有一格合格的家图格作为 NPC 的站立点，否则会显示“这不是有效的房屋。”。NPC 旗号会挂在 NPC 站立点上方。如果有多个有效的家图格，则会选择分数最高的图格中，最靠左上的那格。[18]\n当房屋较小时，城镇宠物和城镇 NPC可能会共享同一个家图格。不过，在将第二个 NPC 分配进房屋时，该图格必须再通过一次检查。[19]\n\n松露人\n松露人 NPC 对他的房屋有额外条件：其最低的图格（Y2）必须高于地表，且房屋周围范围内必须有至少 100 格的发光蘑菇生物群系物块。这一范围和用于计算邪恶分值的区域的大小相同。[20]\n如果试图将松露人移动到不符合此需求的房屋，会显示状态讯息：“此房屋不符合以下人物要求:松露人。”\n\n成就\n 有家可归 • “建造一栋足够大的房屋，让第一个城镇NPC（如向导）住进来。”成功地让 NPC 住进你的第一间房屋。()类别： 探险家\n 房产中介 • “让所有可能的城镇NPC都生活在你的世界中。”所有城镇 NPC 都住在你的世界中。()类别： 挑战者\n备注\n 两个没有空墙区域的房屋示例。NPC 不能自己入住到这些房屋中，必须由玩家分配。\n增加世界中空房屋内的空墙区域（即只有背景墙，没有其它实心块/背景物体的图格）的大小会使 NPC 入住更快。此外，使用沙岩砖墙会将 NPC 入住需花费的时间增加。[21]\n这意味着没有空墙区域的房屋只能被玩家分配 NPC。\n房屋可以连在一起并共用公共墙壁、地板、天花板、和门。对于玩家看来像一座有多个房间的房屋或者公寓的结构，在 NPC 看来是一堆互相独立的房屋。\n几乎所有 NPC 房屋都符合玩家放置床并将其用作生成点所需的条件，只要床正上方的图格是清空的即可（完整细节，参见床页面）。床也算作舒适性物品。\n如果已分配给 NPC 的房屋被摧毁或有任何要求变为无效状态，NPC 会在此区域走动直到重新有可用的有效房屋。如果 NPC 被杀死，他会在有效的房屋恢复了之后立刻重生。\n当房屋处于可见屏幕内时，NPC 不会在房屋内重生，取而代之的是在屏幕外面的区域走动。在夜晚，如果玩家移动到几个屏幕之外，或使用任何魔镜或传送机，NPC 们会自动进入他们的房屋中。\n世界的边缘不算作房屋的框架的一部分。\n如果背景墙由于生物群系蔓延而被转化（如石墙变为珍珠石墙），房屋将会变得无效，因为被转化的墙被视为不安全的。\n小贴士\n 一个无限房屋。从 1.3.1() 开始这不再可用。\n 拥有较少的墙的有效房屋。\n在腐化或猩红生物群系中的房屋通常是无效的。这会让购买有生物群系需求的物品（尤其是油漆工）需要折腾一番才能满足。对于此种情况，建议使用国王雕像或女王雕像将 NPC 传送以购买物品。\n如果没有国王雕像或女王雕像，可以在邪恶分值判定区域外且仍然处于邪恶生物群系中（邪恶生物群系的背景可见）的位置建造房屋，它将仍然是上述生物群系中的有效房屋。\n致动器可以和蓝、棕、灰、丛林蜥蜴压力板共同使用来让玩家可以进入，同时阻止敌怪进入和 NPC 外出。但是，如果致动后的墙维持打开状态，这可能让房屋变得无效，直到再次将其变得实心为止。\n也可以用机关门，敌怪和 NPC 都打不开它。\n用“玩家上方”感应器来代替压力板会很有用且很方便。这不仅可以节约一些可用地板空间，还能避免因为意外踩踏而让入口意外开启。警告：感应器自身不是有效的房屋框架物块；如果将其用作地板、天花板、或侧墙（包括拐角）的一部分，则房屋会变得无效。\n若需要，玩家可以通过摧毁所有其余房屋的方式强制让某个 NPC 进入特定的房屋。\n在房屋符合大小要求的同时，它可以是任何形状的，而并不仅限于长方形或正方形。（例如，圆顶房屋依然有效。）\n明智的做法是在当前 NPC 数量之外建造一些“备用”房屋：\n任何新 NPC 一旦生成或被（可能是意料之外地）找到立刻就能搬进来。\n特别是在进入困难模式时，一些房屋可能会因腐化或猩红而变得无效，有备用的房屋有助于避免 NPC 变得无家可归。\n在每个基地中都有额外的房屋对于四处移动 NPC 来管理快乐会有所帮助，并有助于确保晶塔维持可用。\n在地下建造房屋时，粘性炸弹或甲虫炸弹是不错的选择，因为它们较为精准，且能够破坏背景墙以更方便地替换墙。\n虽然将所有 NPC 塞入小房屋的做法可能很诱人，但这为装饰或装备留下的空间很少。许多制作站是 3 格宽 3 格高的，随着游戏推进，玩家还能获得最大 6 格宽 4 格高的绘画作品和动物皮，以及 3 格宽、最多 6 格高的盆栽植物。\n此外，如上方所述，若在房屋中有更多的空墙区域会让 NPC 更快入住。\n房屋是玩家挥洒创意的好地方。为 NPC 提供经过装修及主题化的家可以是很有意思的，虽然空荡荡的房间也足以让他们满意。NPC 快乐系统则基于这种乐趣来源使 NPC 对其房屋的位置和与其他 NPC 房屋的距离有所偏好。虽说如此，NPC 的快乐并不受房屋的外观或装修所影响，从而让玩家在这方面能不受约束自由发挥。\n花絮\n有图格位于距离真正世界边界 5 格以内的房屋被视为无效的，对应状态讯息为“我们需要为此提供更好的文本！！！”不过，这一条件无法达成（除非外部编辑世界），因为在游戏内的可见世界边界和真正世界边界之间的距离为 41 或 42 格。",
  "content_length": 6967,
  "chinese_ratio": 0.959,
  "categories": [
    "有对应旧版页面的主空间页面",
    "环境"
  ]
}