{
  "title": "无敌帧",
  "content": "无敌帧（也被称为免伤帧）[a]是一段短暂的时间，在这一时段中实体无法受到任何伤害。它通常是在受到伤害后立即获得的。\n无敌帧的通常目的是防止实体从持续性的或快速重复的伤害源处受到过多伤害。例如，如果没有无敌帧，浸没在熔岩中的玩家就会每嘀嗒[1]受到一次伤害，即每秒 60 次。\n对于玩家来说，除了受到伤害以外，在一些其他情况下也会获得无敌帧。\n\n目录\n\n1 玩家无敌\n\n1.1 无敌帧分组\n1.2 无敌帧长度\n\n2 实体无敌\n\n2.1 全局无敌\n2.2 静态无敌\n2.3 局部无敌\n2.4 技术性信息\n\n2.4.1 全局无敌\n2.4.2 静态无敌\n2.4.3 局部无敌\n\n3 来自非玩家来源的实体无敌\n第 2 组所有由这些 Boss 造成的伤害：[4]\n月亮领主()光之女皇()\n第 3 组用普通虫网捕捉以下小动物时受到的伤害：[5]\n熔岩萤火虫()岩浆蜗牛()地狱蝴蝶()\n第 4 组熔岩造成的伤害。[6]第 5 组所有其他伤害来源。\n例如，若玩家从尖刺（上方的“第 1 组”）受到伤害，他在这段无敌帧期间不会受到接触仙人球（同样是“第 1 组”）的伤害，但他在这段时间内仍然会从敌怪处（“第 5 组”）受到伤害。\n在 前代和任天堂中，没有不同的无敌分组。所有伤害来源都提供相同“类型”的无敌帧。\n\n无敌帧长度\n默认情况下，受到伤害通常会给予玩家 0.67 秒 的无敌帧。这一时间在受到的伤害为 1 时会减半，在 PvP 中则会更低。十字项链和其升级物会增加无敌帧的长度[b]。许多其他效果也会提供无敌帧，例如重生、闪避、格挡、或用坐骑造成伤害。见下表获取细节。\n\n来源\n\n默认[c]\n\n十字项链[d]\n\n受伤时的默认无敌帧[7]\n\n0.67 秒\n\n1.33 秒\n\n若所受伤害为 1[7]\n\n0.33 秒\n\n0.67 秒\n\nPvP伤害[e]\n\n0.13 秒\n\n无\n\n在 PvP 中死亡后重生[8]\n\n5 秒\n\n无\n\n在非 PvP 中死亡后重生[8]\n\n3 秒\n\n无\n\n在进入世界时，或被传送回生成点时（例：通过魔镜）[8]\n\n1 秒\n\n无\n\n神圣防护()[9]\n\n1.33 秒[f]\n\n2 秒[f]\n\n暗影躲避\n\n黑腰带（和其升级物）[10]\n\n混乱之脑（闪避效果）[11]\n\n地狱之剑()（格挡）[12]\n\n0.5 秒\n\n1 秒\n\n中士联盾()（格挡）\n\n诡药()[13]\n\n使用时以不同几率提供无敌帧：[f]\n10%：4 秒\n20%：2 秒\n30%：1 秒\n40%：不提供\n\n无\n\n同伴方块()（捅刺）[14]\n\n不提供\n\n无\n\n史莱姆坐骑()（击中时）[15]\n\n0.1 秒\n\n无\n\n羽翼史莱姆坐骑()（击中时）\n\n独角兽坐骑()（击中时）[16]\n\n花马坐骑()（击中时）\n\n骏马坐骑()（击中时）\n\n黑马坐骑()（击中时）\n\n山羊坐骑()（击中时）\n\n海盗船坐骑()（击中时）\n\n阴森树坐骑()（击中时）\n\n蛇蜥怪坐骑()（击中时）\n\n割草机()[17]\n\n高尔夫球车()（击中时）\n\n0.2 秒\n\n无\n\n克苏鲁护盾()（猛冲击中）[18]\n\n0.07 秒\n\n无\n\n耀斑盔甲()（猛冲击中）\n\n实体无敌\n“Piercing”重定向到此处。对于已移除的独有修饰语，参见修饰语 § 历史。\n另见：Leinfors 对敌怪无敌的介绍（位于“Spoiler: 1.4.4 Balance Changes”→“Spoiler: Glossary”）\n关于“穿透”射弹的完整列表，参见造成无敌帧的射弹列表。\n非玩家实体（敌怪、小动物、和友好的 NPC）会从玩家的“穿透”或“持续性”攻击（即来自任何伤害来源、在击中实体后仍然还能造成伤害的攻击）获得无敌帧。[19]这包括由玩家造成的伤害（如流星弹、邪箭、魔刺、或彩虹枪），也包括危险物（如发射射弹的机关）。实体的无敌帧通常持续 0.17 秒。\n在内部，射弹是否视为“穿透”是由其 penetrate 决定的。这一属性决定了单个射弹能击中多少个目标。[20]如果 penetrate 的值大于 1，射弹就被视为“穿透”。在射弹对目标造成伤害后，其 penetrate 属性会减少 1，射弹会在 penetrate 到达 0 时消失。penetrate 的值为 1 的射弹被视为“非穿透”——射弹会在击中目标时消失，通常不为被击中的实体提供任何无敌帧，若使用全局无敌，则也不受无敌帧影响。\n\n“穿透”射弹在其 penetrate 到达 1 时（即在击中足够多的目标之后）会变为“非穿透”。\n伤害来源有三种不同的为实体提供无敌的方式：\n\n全局无敌：对来自一个玩家的所有穿透伤害无敌。\n静态无敌：对来自一个玩家的其他相同类型的射弹的伤害无敌。\n局部无敌：对那一特定的射弹的伤害无敌。\n全局无敌\n如果一个玩家的射弹提供全局无敌，在无敌帧持续时间内，受到伤害的实体会暂时对同一玩家的所有穿透伤害来源无敌，包括其他类型的攻击。它默认持续 0.17 秒，但对于某些射弹不同，以允许更频繁/更不频繁地击中。在多人模式下，这类无敌对于每个玩家是分别检查的，因此一个玩家对实体施加全局无敌时不会阻止其他玩家的穿透伤害击中它。\n这是《泰拉瑞亚》的对实体的无敌帧系统的最初实现方式，因此大量的射弹（尤其是较旧的那些）使用的是全局无敌。这一类无敌基本上来说“阻止”了玩家使用不同类型的穿透伤害来源造成伤害。许多提供全局无敌的射弹都是基于这一限制平衡的，否则它们会造成过高的伤害。\n在 前代和任天堂中，全局无敌适用于所有穿透射弹。这会极大地限制作用于同一目标的其他穿透性武器，以及发射多个穿透射弹的武器（如剧毒法杖）。大部分仆从也被视为具有穿透攻击，这也会影响与其一同使用的穿透性武器的效果。这一问题在蜘蛛法杖上极为显著。\n\n静态无敌\n如果一个射弹提供静态无敌，受到伤害的实体会仅对那一特定类型的射弹（即具有相同 ID 的射弹）的伤害无敌，在无敌帧持续时间内，来自同一玩家的所有那一类型的射弹都无法对该实体造成伤害。来自其他玩家的那一类型的射弹不受影响。\n使用这类无敌时，虽然在无敌帧持续时间内同一类型的穿透射弹不能重复造成伤害，任何其他类型的穿透射弹都能正常造成伤害。大多数提供静态无敌的射弹都是基于这一点进行平衡的。\n例如，在胡蜂枪的胡蜂（射弹 ID 189）伤害实体后，该实体会暂时对所有胡蜂变为无敌。在无敌帧的持续时间内，胡蜂会穿过实体而不造成伤害。不过，该实体在胡蜂的无敌帧期间仍然会受到任何其他类型射弹的伤害，如雨云魔杖的雨滴（射弹 ID 239，和胡蜂的 ID 189 不同）或乌鸦仆从（射弹 ID 317）。\n\n局部无敌\n如果一个射弹提供局部无敌，在无敌帧持续时间内，受到伤害的实体仅会对该射弹本身（即造成伤害的那一特定射弹实例）无敌。所有其他穿透射弹，包括同一类型的射弹，在无敌帧期间仍然能造成伤害。\n因此，发射大量造成局部无敌的射弹的效率会比造成静态无敌的射弹要高。由于这类无敌在《泰拉瑞亚》历史上大部分时间内都没有广泛使用，几乎所有穿透性武器都没有依照它来平衡。\n例如，所有致命球仆从（造成局部无敌）都遵循其自己独立的无敌计时器运作，完全不会互相冲突。如果一个致命球对实体造成了伤害，在它造成的无敌帧期间另一个致命球仍然能够造成伤害。在更高的召唤数时，相比造成全局或静态无敌，造成局部无敌的致命球能显著造成更高的伤害。\n部分使用局部无敌的射弹在生成时会继承其他射弹的无敌帧，例如空中祸害的分裂箭。\n\n技术性信息\n每种无敌帧在内部由不同方式实现。\n\n全局无敌\n每个实体会记录一个拥有 256 个元素的免伤时间数组。[21]这些元素中的前 255 个分别对应一个玩家；最后的第 256 个元素不对应任何玩家（可以将其视为默认的伤害来源）。每个元素的值默认为 0。若它大于 0，则它每嘀嗒会降低 1，且其对应伤害来源无法对实体造成伤害。\n当对实体施加全局无敌时，无敌帧的长度会被加给列表中对应伤害来源的那个元素。在大部分情况下，伤害来源都是发射射弹的那个玩家。不过，如果伤害和任何玩家都不相关，或者无法找到作为伤害来源的玩家，伤害就会被视为来自默认的伤害来源，无敌帧的长度会被加给第 256 个元素。\n单人模式下，所有友方射弹的伤害来源（即所有能对敌怪造成伤害的射弹，这包括来自武器、NPC、机关等等的射弹）都被视为玩家。\n在以下情况下，伤害来源被视为来自默认伤害来源：\n\n由“非玩家来源”对非玩家实体造成的伤害。见下方获取细节。\n在多人模式中：\n不是直接由玩家创建的射弹，这通常是能创建射弹的图格（如巨石、TNT桶()等等）。验证[22]\n由机关创建的射弹，如通过起动装置触发的飞镖机关，但起动装置不直接被玩家激活。[23]\n静态无敌\n游戏会记录一个 1022 行，200 列的二维数组 perIDStaticNPCImmunity（perIDStaticNPCImmunity[1022][200]）。[24]每行代表一类射弹，每列代表一个 NPC 栏位。\n当造成静态无敌的射弹伤害实体时，元素 perIDStaticNPCImmunity[射弹的ID][NPC 栏位索引] 的值会被设为 当前游戏时间[g] + 无敌帧长度。“无敌帧的长度”等于射弹的 idStaticNPCHitCooldown 属性。[25]在射弹伤害实体后，它还会将实体和对应伤害源相关的全局无敌时间设为零。\n当造成静态无敌的射弹将要伤害实体时，游戏会检查元素 perIDStaticNPCImmunity[射弹 ID][NPC 栏位索引] 的值是否不超过当前游戏时间。如果它大于当前游戏时间，则射弹将无法对实体造成伤害。\n例如，玩家用寒霜剑的寒霜矢射弹（ID 119，造成 10 嘀嗒的静态无敌帧）攻击NPC 栏位索引为 0 的实体会将元素 perIDStaticNPCImmunity[119][0] 的值设为当前游戏时间 + 10。因而，在接下来的 10 嘀嗒内，来自同一玩家的任何寒霜矢射弹将无法对该实体造成伤害。\n\n局部无敌\n每个射弹会记录一个拥有 200 个元素的免伤时间数组[26]，每个元素对应一个 NPC 栏位。每个元素的值默认为 0。当造成局部无敌的射弹伤害实体时，对应该实体所占用的 NPC 栏位的元素将会被设置为无敌帧的长度。“无敌帧的长度”等于射弹的 localNPCHitCooldown 属性。[27]当相关的元素的值不为 0 时，射弹无法对占用 NPC 栏位的实体造成伤害。此外，若射弹的 localNPCHitCooldown 不是 -2，在其伤害实体后，它还会将实体和对应伤害源相关的全局无敌时间设为零。\n因为该值的降低基于射弹更新，所以它会受到射弹的 extraUpdates 属性影响。射弹更新默认每嘀嗒发生一次，而 extraUpdates 具有 n 的值意味着射弹每嘀嗒会额外进行 n 次更新。当值大于 0 时，它每次更新会降低 1。\n另外，localNPCHitCooldown 有两个特殊值：-1 和 -2。\n\n如果 localNPCHitCooldown 为 -1，就意味着被射弹伤害的实体会对那个特定射弹永久免疫；该实体永远无法再次被那个特定射弹伤害。换言之，一个射弹仅能伤害单个实体一次。\n如果 localNPCHitCooldown 是 -2，关于局部无敌的机制会被无视。局部无敌免伤时间数组中的所有值都不会改变；射弹会改为遵循穿透射弹的通常行为，在射弹可穿透且伤害到实体时对其造成 10 嘀嗒的全局无敌帧。\n如果 localNPCHitCooldown 不是负值，射弹的局部无敌的实际长度（单位为嘀嗒）可以用下方公式计算：\n[math]\\displaystyle{ \\text{无敌帧}=\\left\\lfloor\\frac{\\textit{localNPCHitCooldown}}{\\textit{extraUpdates}+1}\\right\\rfloor + \\textit{localNPCHitCooldown}\\mod(\\textit{extraUpdates}+1) }[/math]\n例如，用狂星之怒的射弹（ID 503，造成 30 嘀嗒的局部无敌帧，extraUpdates 值为 1）攻击 NPC 栏位索引为 0 的实体会将列表中的第一个元素的值设为 30。该值每嘀嗒会减少 2，使得实际无敌帧长度为 15 嘀嗒。\n\n来自非玩家来源的实体无敌\n非玩家实体也会在受到熔岩的伤害、或在受到其他非玩家实体的接触伤害后获得无敌帧。在无敌帧持续时间内，它们无法被熔岩和其他非玩家实体再次伤害。这些伤害不被视为来自任何玩家，因而不会与由玩家攻击造成的任何类型的无敌帧互相干扰。[28]\n当受到熔岩伤害时，所有实体都会获得 0.5 秒的无敌帧。\n当受到接触伤害时，永恒水晶()会获得 0.33 秒的无敌帧，所有其他实体会获得 0.5 秒的无敌帧。\n仅有少数几种方式能让非玩家实体互相之间受到接触伤害，包括：\n\n小动物和城镇 NPC 从敌怪处受到接触伤害。\n()永恒水晶从敌怪处受到伤害。\n()蜜蜂攻击敌怪。\n()蜜蜂存在时，蜂王造成和受到其他敌怪的伤害。\n攻击速度\n自动挥舞\n暴击\n伤害\n无敌帧\n击退\n锁定(电脑版、、、和)\n仆从\n射弹速度\n环境\n环境物体\n环境实体()\n生物群系背景\n生物群系\n蔓延\n日夜更替\n事件\n重力\n液体\n月相\n音乐\nNPC 消失\nNPC 生成\n状态讯息\n风\n界面\nBoss 生命条()\n相机模式(电脑版)\n制作人员名单()\n表情()\n小地图\nLogo\nNPC 旗号\n标题讯息(电脑版)\n小贴士\n资源包(电脑版)\n创意工坊中心(电脑版)\n物品\n可选择制作材料\n物块交换()\n消耗品\n制作站\n徒手\n联动内容\n防爆物体\n平坦表面物品\n挖矿速度\n修饰语\nNPC 掉落\n放置\n镐力\n稀有度\n配方\n收纳\n工具提示\n使用时间\n价值\n游戏\n成就()\n难度\n旅行()\n经典\n专家()\n钱币拾取\n大师()\n钓鱼\n高尔夫()\nHoik\n音乐\n晶塔()\n城镇()\n多人模式\n服务器\n聊天\n多人模式\n玩家\n仇恨\n弹药节约\n呼吸计\n增益和减益\n人物\n人物风格()\n伤害减免\n猛冲\n死亡\n防御\n闪避\n溺水\n附加跳\n掉落伤害\n鬼魂()\n发型\n生命\n生命再生\n物品栏\n生命偷取\n配装()\n运气()\n魔力\n移动速度\n社交栏\n生成\n隐形\n设置\n光标模式\n游戏控制\n照明模式()\n视差()\n设置(电脑版、、、和)\n切换键\n技术\nAI\n命令行参数\nConfig.json\n数据 ID\n游戏平台\nNPC 名字\n射弹\n世界\n困难模式\n困难模式转换\n困难模式之前\n秘密种子()\n世界\n生成\n世界种子()\n世界大小",
  "content_length": 6032,
  "chinese_ratio": 0.858,
  "categories": [
    "验证",
    "电脑正式版中引入的实体",
    "游戏机制"
  ]
}